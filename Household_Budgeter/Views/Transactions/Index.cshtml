@model IEnumerable<Household_Budgeter.Models.Transaction>

@{
    ViewBag.Title = "Index";
}

<br/>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="panel-title">
                    <h2>Transaction List<a data-toggle="modal" href="#create" class="btn btn-default pull-right">Make A New Transaction</a></h2>
                </div>
            </div>
            <div class="panel-body">
                <table class="table" id="transactionTable">
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.Category.Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.User.FirstName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.BankAccounts)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Date)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Types)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Amount)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ReconciledAmount)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Reconciled)
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>


                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Category.Name)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.User.FirstName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.BankAccounts.Name)
                                </td>
                                <td>
                                    @item.Date.ToString("D")
                                </td>
                                <td>
                                    @if (item.Types == true)
                                    {
                                        @Html.Raw("Income")
                                    }
                                    else
                                    {
                                        @Html.Raw("Expenses")
                                    }
                                </td>
                                <td>
                                    @item.Amount.ToString("C")
                                </td>
                                <td>
                                    @if (item.ReconciledAmount != null)
                                    {
                                        @item.ReconciledAmount.Value.ToString("C")
                                    }
                                </td>
                                <td>
                                    @if (item.Reconciled == true)
                                    { <span class="label label-success">Success</span>}
                                    else
                                    { <span class="label label-warning">Failed</span>}
                                </td>
                                <td>
                                    @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                                    @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                                    @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <br />
        
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="create" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="container">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                @Html.Action("Create")
                <button type="button" class="btn btn-default right" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->